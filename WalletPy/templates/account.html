{% extends "base.html" %} {% block content %} {% load static %}

<div class="block">
    <h1 class="text-3xl font-bold py-10 pl-10">Mon compte</h1>
    <div class="max-w-2xl mx-auto">
        <form name="updateUser" action="update/" method="POST">
            {% csrf_token %}
            <div class="w-full">
                <div class="w-full bg-blue-600 h-24 rounded-t-lg"></div>
                <div class="absolute -mt-20 ml-10">
                    <img class="w-28 mt-5" src="{% static 'profilenft.png' %}"/>
                </div>
                <div class="absolute ml-40 flex flex-row">
                    <input type="text" id="id_username" name="username" maxlength="15" value="{{user.username}}" class="placeholder-black border-none w-44 px-4 py-2 text-md outline-none" required/>
                </div>
            </div>

            <div class="bg-primary bg-white border border-primary rounded-b-lg p-5 pt-20">
                <div class="bg-primary border border-primary rounded p-2 text-center">
                    <label class="font-bold">Modifier mes informations :</label>
                    <div class="flex flex-col py-4">    
                        <div id="username" class="flex flex-row">
                            <label class="font-bold leading-10 pr-2">Pseudo : </label>
                            <input type="text" id="id_username" name="username" maxlength="15" value="{{user.username}}" class="border border-gray-300 w-52 px-4 py-2 rounded-md text-md text-gray-700 outline-none" required/>
                        </div>
                        <label class="text-left py-5"><strong>Email : </strong>{{user.email}}</label>
                        <div id="password" class="flex flex-row">
                            <label class="font-bold leading-10 text-left">Mot de passe: </label>
                            <input type="password" id="id_new_password" name="new_password" placeholder="Nouveau mot de passe" class="mx-2 border border-gray-300 w-52 px-4 py-2 rounded-md text-md text-gray-700 outline-none">
                            <input type="password" id="id_confirm_password" name="confirm_password" placeholder="Confirmer mot de passe" class="border border-gray-300 w-52 px-4 py-2 rounded-md text-md text-gray-700 outline-none">
                        </div>
                    </div>
                    <button type="submit" onClick="validate()" value="submit" class="bg-indigo-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Confirmer</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
var password = document.getElementById("id_new_password");
var confirm_password = document.getElementById("id_confirm_password");
function validate() {
    if(password.value != confirm_password.value) {
        confirm_password.setCustomValidity("Mot de passe pas identique");
    } else {
        confirm_password.setCustomValidity("");
    }
}
password.onchange = validatePassword;
confirm_password.onkeyup = validatePassword;
</script>

{% endblock %}